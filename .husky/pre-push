#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Check if src/ files changed
if git diff --name-only HEAD~1 HEAD | grep -q "^src/"; then
  echo "Source files changed, running full checks..."
  npx tsc --noEmit
  npm test
  npm run build
else
  echo "No source changes, running light checks..."
  npm test
fi
